Process Inefficiencies: O2 to Long-Term 
                                       
  Current Friction Points                 
  Inefficiency: 1-hour task granularity
  Impact: Overhead tracking tiny tasks      
  Fix: Group into half-day sprints
  ────────────────────────────────────────  
  Inefficiency: 135 Linear tickets       
  Impact: Context switching overload        
  Fix: Consolidate to ~20 epic tickets   
  ────────────────────────────────────────
  Inefficiency: Multiple agent systems
    (Cursor, Codex, Claude)
  Impact: Tool switching cost
  Fix: Pick 1 primary, 2 specialist
  ────────────────────────────────────────
  Inefficiency: TASKS.md = 500+ lines
  Impact: Scanning takes time
  Fix: Split: TASKS.md (active) + ARCHIVE.md
  ────────────────────────────────────────
  Inefficiency: Test first vs code first
    confusion
  Impact: Rework on tests
  Fix: Standardize: E2E TDD always
  ────────────────────────────────────────
  Inefficiency: Manual deployment
  Impact: Firebase CLI friction
  Fix: CI/CD auto-deploy on main
  ────────────────────────────────────────
  Inefficiency: No perf budget enforcement
  Impact: Regression discovery too late
  Fix: Add Lighthouse CI to PR checks
  ────────────────────────────────────────
  Inefficiency: BoardPage.tsx = 7,754 LOC
  Impact: Cognitive load
  Fix: Extract components (no rewrite)
  ---
  Recommended Process Changes

  1. Task Management (Do This Week)

  TASKS.md → 3 sections:
  ├── ACTIVE (current sprint, ~5 items)
  ├── BACKLOG (prioritized, ~20 items)
  └── ARCHIVE (done, reference only)

  Linear → Epics only:
  ├── [MVP] Hard Gate
  ├── [AI] Command Expansion
  ├── [PERF] Cursor Optimization
  └── [POLISH] UX Items

  Why: Scannable in 30 seconds vs 5 minutes.

  ---
  2. Test Strategy (Standardize)

  # New feature flow:
  1. Write failing E2E first (always)
  2. Run locally:
  PLAYWRIGHT_BASE_URL=http://127.0.0.1:4173
  npm test
  3. Implement until pass
  4. Add unit guardrails if needed
  5. Commit

  # Never:
  - Write code then test
  - Skip E2E for "simple" changes

  Add to AGENTS.md:

  ## Golden Rule: E2E First
  Always write failing Playwright test
  before implementation.
  Exception: hot-fixes (add test within same
   commit).

  ---
  3. Agent Workflow (Pick Stack)

  Primary:   Claude Code (this session) →
  architecture, big decisions
  Fast:      Cursor → small edits, file
  operations
  Review:    Claude Opus → code review, diff
   analysis

  Don't: Switch between 4+ AI tools per
  session.

  ---
  4. Deployment Automation

  # .github/workflows/deploy.yml
  on:
    push:
      branches: [main]

  jobs:
    deploy:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v3
        - run: cd app && npm ci && npm test
        - run: firebase deploy --only
  hosting,functions

  Win: Push → deploy, no manual firebase
  login.

  ---
  5. Performance Budgets

  // package.json
  {
    "scripts": {
      "test:perf": "lighthouse
  http://127.0.0.1:4173
  --budget=perf-budget.json"
    }
  }

  // perf-budget.json
  {
    "budgets": [
      { "metric": "first-contentful-paint",
  "budget": 1500 },
      { "metric": "interactive", "budget":
  3000 },
      { "metric": "cumulative-layout-shift",
   "budget": 0.1 }
    ]
  }

  Win: CI blocks perf regressions.

  ---
  6. Code Splitting (Technical Debt)

  Current:
  BoardPage.tsx (7,754 LOC) → ~40%
  functions, ~30% render, ~30% sync

  Target:
  BoardPage.tsx         (~500 LOC) →
  orchestration only
  ├── hooks/
  │   ├── useBoardObjects.ts (~800 LOC)
  │   ├── useSelection.ts    (~400 LOC)
  │   └── useTransforms.ts   (~600 LOC)
  ├── components/
  │   ├── Canvas.tsx         (~200 LOC)
  │   ├── Toolbar.tsx        (~300 LOC)
  │   └── ObjectLayers.tsx   (~400 LOC)

  Approach: Extract 1 hook/week, no
  rewrites.

  ---
  7. Documentation Hygiene

  docs/
  ├── ACTIVE/
  │   ├── PRD.md          (requirements)
  │   └── CURRENT.md      (this sprint's
  focus)
  ├── REFERENCE/
  │   ├── DECISIONS.md
  │   └── PATTERNS.md
  └── SUBMISSION/
      └── (freeze this before submit)

  Win: New context in 1 file (CURRENT.md),
  scan docs once.

  ---
  8. Communication Protocol

  Agent handoff format:

  ## Context
  [What I was doing, file paths, test
  status]

  ## Handoff
  [Specific next step, expected outcome]

  ## Blockers
  [What's stuck, what I tried]

  ## Evidence
  [Test output, error logs]

  Win: 5-minute context transfer vs
  20-minute catchup.

  ---
  Immediate Actions (Priority Order)
  Priority: 1
  Action: Split TASKS.md →
    ACTIVE/BACKLOG/ARCHIVE
  Time: 15 min
  ────────────────────────────────────────
  Priority: 2
  Action: Add E2E-first rule to AGENTS.md
  Time: 5 min
  ────────────────────────────────────────
  Priority: 3
  Action: Set up GitHub Actions deploy
  Time: 30 min
  ────────────────────────────────────────
  Priority: 4
  Action: Extract useSelection hook from
    BoardPage
  Time: 1 hr
  ────────────────────────────────────────
  Priority: 5
  Action: Add perf budget to PR checks
  Time: 15 min
  Total: ~2 hours for 5-10x process
  efficiency gain.

  Want me to start with #1 (TASKS.md split)?